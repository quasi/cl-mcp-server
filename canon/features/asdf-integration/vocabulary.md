# ASDF Integration Vocabulary

Terms specific to ASDF systems, Quicklisp, and system management.

---

## ASDF

**ASDF** (Another System Definition Facility) is Common Lisp's standard
build system for:

- Defining systems and components
- Declaring dependencies
- Compiling and loading code
- Managing build order

Analogous to Make, but Lisp-aware.

---

## System

A **System** is a collection of Lisp files forming a library or application:

```lisp
(defsystem "my-app"
  :version "1.0.0"
  :author "Developer"
  :depends-on ("alexandria" "cl-ppcre")
  :components ((:file "package")
               (:file "utils" :depends-on ("package"))
               (:file "main" :depends-on ("utils"))))
```

Systems have:
- Name (unique identifier)
- Version
- Author and license metadata
- Dependencies (other systems)
- Components (files, modules)

---

## System Definition (.asd file)

A **System Definition File** (.asd) defines a system:

```lisp
;;; my-system.asd
(asdf:defsystem "my-system"
  :description "My great system"
  :version "0.1.0"
  :components (...))
```

ASDF searches for .asd files in:
- `~/common-lisp/`
- `~/.local/share/common-lisp/source/`
- Quicklisp's dists directory
- Directories in `asdf:*central-registry*`

---

## Component

A **Component** is part of a system:

| Component Type | Description |
|----------------|-------------|
| `:file` | A single Lisp file |
| `:module` | A directory of components |
| `:static-file` | Non-Lisp file (data, config) |

Components can depend on other components in the same system.

---

## Dependency

A **Dependency** is a system required by another system:

```lisp
(defsystem "my-app"
  :depends-on ("alexandria"      ; Direct dependency
               "cl-ppcre"))       ; Direct dependency
```

Dependencies are:
- **Direct**: Explicitly declared in `:depends-on`
- **Transitive**: Required by dependencies (indirect)

---

## Quicklisp

**Quicklisp** is a library manager for Common Lisp:

- Downloads and installs systems
- Manages versions via "dists" (distributions)
- Provides `ql:quickload` for easy loading
- Maintains local cache of downloaded libraries

Website: https://www.quicklisp.org/

---

## Dist

A **Dist** (distribution) in Quicklisp is a versioned collection of systems:

- `quicklisp` dist: The main Quicklisp repository
- `ultralisp` dist: More frequent updates
- Custom dists: Organization-specific

Each dist has a version date (e.g., "2024-01-15").

---

## Quickload

**Quickload** is the operation of loading a system via Quicklisp:

```lisp
(ql:quickload "drakma")  ; Downloads if needed, then loads
```

Quickload:
1. Checks if system is installed
2. Downloads if missing (with dependencies)
3. Loads the system via ASDF

---

## System Registry

The **System Registry** is ASDF's database of known systems:

- Populated by scanning directories
- Cached for performance
- Can be cleared with `(asdf:clear-source-registry)`

Systems must be in the registry to be loadable.

---

## Local Projects

**Local Projects** are systems in Quicklisp's local-projects directory:

```
~/quicklisp/local-projects/
```

ASDF automatically finds systems here. Used for:
- Development projects
- Unreleased libraries
- Custom forks

---

## System Operation

A **System Operation** is an action performed on a system:

| Operation | Description |
|-----------|-------------|
| `load-op` | Load (compile if needed) |
| `compile-op` | Compile without loading |
| `test-op` | Run tests |
| `load-source-op` | Load source without compiling |

Invoked via `(asdf:operate 'operation 'system-name)`.

---

## Dependency Graph

The **Dependency Graph** is the directed acyclic graph (DAG) of system
dependencies:

```
my-app
  ├─ alexandria
  │   └─ (no dependencies)
  └─ cl-ppcre
      └─ (no dependencies)
```

Can be:
- **Direct**: Immediate dependencies only
- **Transitive**: All dependencies (full closure)

---

## FASL

A **FASL** (Fast Load) file is compiled Lisp code:

- `.fasl` extension (SBCL on x86-64)
- Platform-specific binary format
- Generated by ASDF during compilation
- Stored in `~/.cache/common-lisp/sbcl-...`

Loading a FASL is faster than recompiling.

---

## Source Registry

The **Source Registry** is ASDF's configuration of where to find .asd files:

```lisp
;; Add custom location
(asdf:initialize-source-registry
  '(:source-registry
    (:directory "/my/projects/")
    :inherit-configuration))
```

---

## Bundle Operation

A **Bundle Operation** packages a system into a single file:

- `asdf:monolithic-compile-bundle-op` - Single FASL
- `asdf:program-op` - Standalone executable

Used for deployment and distribution.
